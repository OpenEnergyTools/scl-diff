import { findControlBlockSubscription } from "../tControl/findControlSubscription.js";
import { updatedConfRev } from "../tControl/updateConfRev.js";
/** Updates `ReportControl` attributes and cross-referenced elements
 * @param update - update edit on `ReportControl` attributes
 * @returns Completed update edit array */
export function updateReportControl(update) {
    if (update.element.tagName !== "ReportControl")
        return [];
    const reportControl = update.element;
    const attributes = update.attributes;
    const confRev = updatedConfRev(reportControl); // +10000 for update
    const attrs = { ...attributes, confRev };
    const ctrlBlockUpdates = [
        { element: reportControl, attributes: attrs },
    ];
    if (!attributes.name)
        return ctrlBlockUpdates;
    const extRefUpdates = findControlBlockSubscription(reportControl).map((extRef) => ({
        element: extRef,
        attributes: { srcCBName: attributes.name },
    }));
    return ctrlBlockUpdates.concat(extRefUpdates);
}
//# sourceMappingURL=updateReportControl.js.map