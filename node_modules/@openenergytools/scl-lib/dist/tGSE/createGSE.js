import { createElement } from "../foundation/utils.js";
import { macAddressGenerator } from "../generator/macAddressGenerator.js";
import { appIdGenerator } from "../generator/appIdGenerator.js";
import { getReference } from "../tBaseElement/getReference.js";
/** @returns Edit inserting new `GSE` to [[`parent`]] ConnectedAP element */
export function createGSE(parent, attributes, options = {}) {
    if (parent.tagName !== "ConnectedAP")
        return null;
    const doc = parent.ownerDocument;
    const gSE = createElement(doc, "GSE", attributes);
    const address = createElement(doc, "Address", {});
    gSE.appendChild(address);
    const pTypes = {};
    pTypes["MAC-Address"] = options.mac ?? macAddressGenerator(doc, "GSE")();
    pTypes.APPID = options.appId ?? appIdGenerator(doc, "GSE")();
    pTypes["VLAN-ID"] = options.vlanId ?? "000";
    pTypes["VLAN-PRIORITY"] = options.vlanPriority ?? "4";
    Object.entries(pTypes)
        // eslint-disable-next-line @typescript-eslint/no-unused-vars
        .filter(([_, value]) => value !== undefined)
        .forEach(([type, value]) => {
        const child = createElement(doc, "P", { type });
        child.textContent = value;
        address.appendChild(child);
    });
    const newMinTime = createElement(doc, "MinTime", {
        unit: "s",
        multiplier: "m",
    });
    newMinTime.textContent = options.MinTime ?? "10";
    gSE.appendChild(newMinTime);
    const newMaxTime = createElement(doc, "MaxTime", {
        unit: "s",
        multiplier: "m",
    });
    newMaxTime.textContent = options.MaxTime ?? "10000";
    gSE.appendChild(newMaxTime);
    return {
        parent,
        node: gSE,
        reference: getReference(parent, "GSE"),
    };
}
//# sourceMappingURL=createGSE.js.map